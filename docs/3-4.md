# 3-4. CakePHP

<h3>イントロダクション</h3>
現場でCakePHPのバージョン2系を使用しています。
ここではCakePHPで躓いた点、勉強した点などを記入していきます。

<h3>そもそもフレームワークとは</h3>
実務経験ゼロのとき、「フレームワーク」「MVC」といわれても何のことやらといった感じだ。
なぜなら市販の書籍の入門書にはこんなものは書かれていないからである。
そんなこんなで業務で扱うことになったCakePHP。
なにやらおいしそうなフレームワークであるが、非常に（初心者にとっては）難しい。
なにやら楽にアプリケーションが作れるようになっているそうだ。
PHPも書籍を参考に覚えたばかりなのに、何だ、これは！

<h3>これからのフレームワーク</h3>
この辺を見るとCakePHPは推されている。とりあえず使っとこう。
https://furien.jp/columns/128/

<h3>とりあえず基本的なこと。</h3>
PHPを用いたアプリケーションを作るとき、ある程度の規模になると、
データベースを読み書きしたりする処理や、データのバリデーション処理、
フォームから値を受け取る処理、その値をデータベース向けに整形する処理、
など沢山の処理が必要になるので、ファイルを機能ごとに分ける必要が出てくる。

そこで、
PHPを三つの役割にわけることにした。
1. モデル(Model)…データベースの読み書き、データ整形やバリデーションもこいつの仕事。
1. ビュー(View)…入力フォームや出力結果を表示する。
1. コントローラー(Controller)…URLと関連づいていて、ビューやモデルに表示することができる。

<h3>補：クラス</h3>
クラスとは、プロパティと呼ばれる変数と、
そのプロパティを操作したり色んなことをしてくれるメソッドのセットパッケージだ。
実際に使うには、特定の変数に入れ込む(インスタンス化する)ことで利用が可能となる。

<h3>モデル</h3>
モデルの中身は、クラスだ。
$useTable, $belongsTo, $hasMany などのプロパティ、
save, findをはじめとしたメソッドを含むクラスである。
これをフレームワークのどこかでインスタンス（オブジェクト）化しているわけだ。

<h3>コントローラー</h3>
コントローラーの中身も、クラスだ。
使用するモデルを指定する$usesプロパティや、
各ページのURLに対応したメソッド（特別にこれをアクションと呼ぶ）が存在するというのが特徴。
例えばhoge.com/fugaとfunction fuga()といったように対応している。
モデルとの違いが分かりづらいかもしれないが、
URLと対応しているゆえ、特定ページでどのDB処理をモデルに依頼し、ビューにどんな値を渡すのか指揮または
折衝する立場と言える。

<h3>ビュー</h3>
私が一番とっつきやす型部分だった。ここにはHTMLを記述する感覚で書けるためだ。
CakePHPでは拡張子がctpになっているが、htmlを含むPHPファイルとして欠ける。
ここでも分岐処理などを書くこともできるのだが、基本的にはここには結果の表示と入力の窓口といった業務に専念してもらう。
表示する変数などのデータはコントローラーに渡してもらう。